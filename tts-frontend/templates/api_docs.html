<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API æ–‡æ¡£ - IndexTTS2 æ§åˆ¶å°</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #1e293b;
        }
        h1 { color: #6366f1; border-bottom: 2px solid #6366f1; padding-bottom: 10px; }
        h2 { color: #4f46e5; margin-top: 30px; }
        h3 { color: #64748b; }
        code {
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
        }
        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
        }
        pre code {
            background: none;
            padding: 0;
        }
        .endpoint {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        .method {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 12px;
            margin-right: 10px;
        }
        .method.get { background: #22c55e; color: white; }
        .method.post { background: #3b82f6; color: white; }
        .method.delete { background: #ef4444; color: white; }
        .url { font-family: monospace; font-size: 14px; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 10px;
            text-align: left;
        }
        th { background: #f8fafc; }
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #6366f1;
            text-decoration: none;
        }
        .back-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <a href="/" class="back-link">â† è¿”å›æ§åˆ¶å°</a>
    
    <h1>ğŸ“– API æ–‡æ¡£</h1>
    <p>IndexTTS2 æ§åˆ¶å° API æ¥å£è¯´æ˜</p>
    
    <h2>åŸºç¡€ä¿¡æ¯</h2>
    <table>
        <tr><th>åŸºç¡€URL</th><td><code>http://192.168.9.68:17202</code></td></tr>
        <tr><th>æ•°æ®æ ¼å¼</th><td>JSON / form-data</td></tr>
        <tr><th>å­—ç¬¦ç¼–ç </th><td>UTF-8</td></tr>
    </table>
    
    <h2>æ ¸å¿ƒæ¥å£</h2>
    
    <div class="endpoint">
        <h3><span class="method post">POST</span><span class="url">/tts</span></h3>
        <p>å‘é€æ–‡æœ¬åˆ°æ•°å­—äººè¿›è¡Œè¯­éŸ³åˆæˆå’Œæ’­æŠ¥</p>
        
        <h4>è¯·æ±‚å‚æ•°</h4>
        <table>
            <tr><th>å‚æ•°</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr>
            <tr><td>text</td><td>string</td><td>æ˜¯</td><td>è¦åˆæˆçš„æ–‡æœ¬å†…å®¹</td></tr>
            <tr><td>voice_id</td><td>string</td><td>å¦</td><td>éŸ³è‰²IDï¼Œé»˜è®¤ä¸º "default"</td></tr>
            <tr><td>channel_id</td><td>int</td><td>å¦</td><td>é€šé“IDï¼Œé»˜è®¤ä¸º 100ï¼ˆæ•°å­—äººé€šé“ï¼‰</td></tr>
        </table>
        
        <h4>è¯·æ±‚ç¤ºä¾‹ (JSON)</h4>
        <pre><code>curl -X POST http://192.168.9.68:17202/tts \
  -H "Content-Type: application/json" \
  -d '{"text": "ä½ å¥½ï¼Œæˆ‘æ˜¯æ•°å­—äººåŠ©æ‰‹", "voice_id": "default"}'</code></pre>
        
        <h4>è¯·æ±‚ç¤ºä¾‹ (form-data)</h4>
        <pre><code>curl -X POST http://192.168.9.68:17202/tts \
  -F "text=ä½ å¥½ï¼Œæˆ‘æ˜¯æ•°å­—äººåŠ©æ‰‹" \
  -F "voice_id=default"</code></pre>
        
        <h4>å“åº”ç¤ºä¾‹</h4>
        <pre><code>{
  "success": true,
  "message": "Sent to digital human"
}</code></pre>
    </div>
    
    <div class="endpoint">
        <h3><span class="method get">GET</span><span class="url">/health</span></h3>
        <p>è·å–ç³»ç»Ÿå¥åº·çŠ¶æ€</p>
        
        <h4>å“åº”ç¤ºä¾‹</h4>
        <pre><code>{
  "status": "healthy",
  "model_loaded": true,
  "digital_human_connected": true,
  "templates_count": 3,
  "timestamp": 1703750400.123
}</code></pre>
    </div>
    
    <div class="endpoint">
        <h3><span class="method get">GET</span><span class="url">/voices</span></h3>
        <p>è·å–éŸ³è‰²åˆ—è¡¨</p>
        
        <h4>å“åº”ç¤ºä¾‹</h4>
        <pre><code>{
  "voices": [
    {"id": "voice1", "name": "voice1", "description": "å¥³å£°"},
    {"id": "voice2", "name": "voice2", "description": "ç”·å£°"}
  ]
}</code></pre>
    </div>
    
    <div class="endpoint">
        <h3><span class="method post">POST</span><span class="url">/voices</span></h3>
        <p>ä¸Šä¼ æ–°éŸ³è‰²ï¼ˆä»…éœ€éŸ³é¢‘æ–‡ä»¶ï¼Œæ— éœ€å‚è€ƒæ–‡æœ¬ï¼‰</p>
        
        <h4>è¯·æ±‚å‚æ•° (form-data)</h4>
        <table>
            <tr><th>å‚æ•°</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr>
            <tr><td>voice_id</td><td>string</td><td>æ˜¯</td><td>éŸ³è‰²ID</td></tr>
            <tr><td>file</td><td>file</td><td>æ˜¯</td><td>WAVæ ¼å¼éŸ³é¢‘æ–‡ä»¶</td></tr>
            <tr><td>description</td><td>string</td><td>å¦</td><td>éŸ³è‰²æè¿°</td></tr>
        </table>
        
        <h4>è¯·æ±‚ç¤ºä¾‹</h4>
        <pre><code>curl -X POST http://192.168.9.68:17202/voices \
  -F "voice_id=my_voice" \
  -F "description=æˆ‘çš„éŸ³è‰²" \
  -F "file=@voice_sample.wav"</code></pre>
    </div>
    
    <div class="endpoint">
        <h3><span class="method delete">DELETE</span><span class="url">/voices/{voice_id}</span></h3>
        <p>åˆ é™¤éŸ³è‰²</p>
        
        <h4>è¯·æ±‚ç¤ºä¾‹</h4>
        <pre><code>curl -X DELETE http://192.168.9.68:17202/voices/my_voice</code></pre>
    </div>
    
    <div class="endpoint">
        <h3><span class="method get">GET</span><span class="url">/digital-human/status</span></h3>
        <p>è·å–æ•°å­—äººè¿æ¥çŠ¶æ€</p>
        
        <h4>å“åº”ç¤ºä¾‹</h4>
        <pre><code>{
  "connected": true,
  "sessionid": 602574
}</code></pre>
    </div>
    
    <div class="endpoint">
        <h3><span class="method post">POST</span><span class="url">/digital-human/status</span></h3>
        <p>æ›´æ–°æ•°å­—äººè¿æ¥çŠ¶æ€ï¼ˆç”±player.htmlè°ƒç”¨ï¼‰</p>
        
        <h4>è¯·æ±‚å‚æ•°</h4>
        <pre><code>{
  "connected": true,
  "sessionid": 602574
}</code></pre>
    </div>
    
    <h2>æ•°å­—äººæ’­æ”¾å™¨</h2>
    <p>ç”¨äºOBSç›´æ’­æ¨æµçš„æ•°å­—äººæ’­æ”¾å™¨é¡µé¢ï¼š</p>
    <ul>
        <li><strong>æ’­æ”¾å™¨åœ°å€ï¼š</strong> <code>http://192.168.9.68:17310/player.html</code></li>
        <li><strong>éšè—çŠ¶æ€æ–‡å­—ï¼š</strong> <code>http://192.168.9.68:17310/player.html?hideStatus=1</code></li>
        <li><strong>åˆ†è¾¨ç‡ï¼š</strong> 1920x1080 (æ¨ªå±)</li>
    </ul>
    
    <h2>æ³¨æ„äº‹é¡¹</h2>
    <ul>
        <li>IndexTTS2 ä½¿ç”¨ "Same as the voice reference" æ¨¡å¼ï¼Œä¸Šä¼ éŸ³è‰²åªéœ€è¦éŸ³é¢‘æ–‡ä»¶ï¼Œä¸éœ€è¦å‚è€ƒæ–‡æœ¬</li>
        <li>æ•°å­—äººé€šé“ ID å›ºå®šä¸º 100</li>
        <li>æ•°å­—äººä¸æ”¯æŒå¹¶å‘ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ª WebRTC è¿æ¥</li>
        <li>TTS æ”¯æŒå¹¶å‘è¯·æ±‚ï¼Œä½†ä¼šæŒ‰é¡ºåºå¤„ç†</li>
    </ul>
    
    <h2>é”™è¯¯ç </h2>
    <table>
        <tr><th>HTTPçŠ¶æ€ç </th><th>è¯´æ˜</th></tr>
        <tr><td>200</td><td>æˆåŠŸ</td></tr>
        <tr><td>400</td><td>è¯·æ±‚å‚æ•°é”™è¯¯</td></tr>
        <tr><td>404</td><td>èµ„æºä¸å­˜åœ¨</td></tr>
        <tr><td>500</td><td>æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</td></tr>
    </table>
</body>
</html>
